@startuml
title Sistem Informasi Geospasial & Tata Ruang Terpadu - CFP Driven (Total CFP 84)

autonumber
actor User
actor Petugas
boundary UI
control System
database DB
control API
control Notification

== Manajemen Layer Peta GIS ==
Petugas -> UI : Akses manajemen layer <<E>>
UI -> System : Request data layer GIS <<E>>
System -> DB : Read daftar layer <<R>>
System --> UI : Data layer tampil <<X>>

Petugas -> UI : Input tambah/ubah layer <<E>>
UI -> System : Submit perubahan layer <<E>>
System -> DB : Write konfigurasi layer <<W>>

== Visualisasi Peta Interaktif ==
User -> UI : Akses peta interaktif <<E>>
UI -> System : Request data peta <<E>>
System -> DB : Read data spasial <<R>>
System --> UI : Peta interaktif tampil <<X>>

== Rencana Detail Tata Ruang (RDTR) ==
Petugas -> UI : Request dokumen RDTR <<E>>
UI -> System : Load data RDTR <<E>>
System -> DB : Read data RDTR <<R>>
System --> UI : RDTR tampil <<X>>

Petugas -> UI : Input perubahan RDTR <<E>>
UI -> System : Submit perubahan RDTR <<E>>
System -> DB : Write update RDTR <<W>>

== Analisis Kesesuaian Lahan ==
User -> UI : Pilih lokasi analisis <<E>>
UI -> System : Submit lokasi <<E>>
System -> DB : Read zonasi lahan <<R>>
System -> DB : Read aturan tata ruang <<R>>
System --> UI : Hasil analisis lahan <<X>>
System -> DB : Write hasil analisis <<W>>
System -> DB : Write histori analisis <<W>>

== Cek Kesesuaian Lokasi Online ==
User -> UI : Input koordinat lokasi <<E>>
UI -> System : Submit koordinat <<E>>
System -> DB : Read peruntukan lahan <<R>>
System -> DB : Read ketentuan zonasi <<R>>
System --> UI : Status kesesuaian lokasi <<X>>
System -> DB : Write hasil pengecekan <<W>>
System -> DB : Write log pengecekan <<W>>

== Rekomendasi Tata Ruang ==
System -> DB : Read data kesesuaian <<R>>
System -> DB : Read data RDTR <<R>>
System -> DB : Write alternatif pemanfaatan <<W>>
System --> UI : Rekomendasi tata ruang <<X>>

User -> UI : Pilih rekomendasi <<E>>
UI -> System : Konfirmasi rekomendasi <<E>>
System -> DB : Write rekomendasi terpilih <<W>>
System -> DB : Write histori rekomendasi <<W>>

== Tracking Proyek Perumahan ==
Petugas -> UI : Request data proyek <<E>>
UI -> System : Load data proyek <<E>>
System -> DB : Read lokasi proyek <<R>>
System -> DB : Read status pembangunan <<R>>
System --> UI : Progres proyek <<X>>

Petugas -> UI : Update status proyek <<E>>
UI -> System : Submit status proyek <<E>>
System -> DB : Write progres proyek <<W>>

== Laporan Pelanggaran Tata Ruang ==
User -> UI : Input laporan pelanggaran <<E>>
UI -> System : Submit laporan <<E>>
System -> DB : Write laporan pelanggaran <<W>>
System -> DB : Write lokasi pelanggaran <<W>>
System --> UI : Status laporan <<X>>
System -> Notification : Trigger notifikasi laporan <<W>>
System -> DB : Write histori laporan <<W>>

== Inventarisasi Kawasan Permukiman ==
Petugas -> UI : Request data kawasan <<E>>
UI -> System : Load inventaris kawasan <<E>>
System -> DB : Read data kawasan <<R>>
System --> UI : Data permukiman <<X>>

Petugas -> UI : Update data kawasan <<E>>
UI -> System : Submit perubahan kawasan <<E>>
System -> DB : Write inventaris kawasan <<W>>
System -> DB : Write histori perubahan <<W>>

== Laporan Tata Ruang Berkala ==
Petugas -> UI : Input periode laporan <<E>>
UI -> System : Request laporan <<E>>
System -> DB : Read data tata ruang <<R>>
System -> DB : Write arsip laporan <<W>>
System --> UI : Laporan berkala <<X>>

== API Geospasial ==
System -> API : Request data geospasial <<E>>
API --> System : Data peta <<X>>
System -> DB : Write cache geospasial <<W>>
System --> UI : Data peta via API <<X>>
System -> DB : Write log API <<W>>
System -> DB : Write log akses eksternal <<W>>

== Alert Perubahan RTRW ==
System -> DB : Read perubahan RTRW <<R>>
System -> DB : Read versi RTRW <<R>>
System -> Notification : Trigger notifikasi RTRW <<W>>
Notification --> User : Notifikasi perubahan <<X>>
System --> UI : Informasi perubahan RTRW <<X>>
System -> DB : Write log notifikasi <<W>>

@enduml