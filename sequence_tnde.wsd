@startuml
title Sistem Persuratan Elektronik Terintegrasi - CFP Driven (Total CFP 108)

autonumber
actor User
actor Pejabat
actor Admin
boundary UI
control System
database DB
control API
control Notification

== Surat Masuk Management ==
User -> UI : Akses surat masuk <<E>>
UI -> System : Request daftar surat masuk <<E>>
System -> DB : Read surat masuk <<R>>
System -> DB : Read metadata surat <<R>>
System --> UI : Daftar surat masuk <<X>>

User -> UI : Buka detail surat <<E>>
UI -> System : Request detail surat <<E>>
System -> DB : Read isi surat <<R>>
System --> UI : Detail surat tampil <<X>>

== Disposisi Elektronik ==
Pejabat -> UI : Input tujuan disposisi <<E>>
Pejabat -> UI : Input catatan disposisi <<E>>
UI -> System : Submit disposisi <<E>>
System -> DB : Write disposisi <<W>>
System -> DB : Write catatan disposisi <<W>>
System -> Notification : Trigger notifikasi disposisi <<W>>
Notification --> Pejabat : Notifikasi disposisi <<X>>
System -> DB : Write histori disposisi <<W>>

== Surat Keluar Creation ==
User -> UI : Input isi surat <<E>>
User -> UI : Input tujuan surat <<E>>
UI -> System : Submit surat keluar <<E>>
System -> DB : Write draft surat <<W>>
System -> DB : Write metadata surat <<W>>
System --> UI : Status draft <<X>>
User -> UI : Ajukan persetujuan <<E>>

== Workflow Approval Surat ==
System -> Notification : Request persetujuan <<W>>
Notification --> Pejabat : Notifikasi approval <<X>>
Pejabat -> UI : Review surat <<E>>
Pejabat -> UI : Input keputusan <<E>>
UI -> System : Submit keputusan <<E>>
System -> DB : Write status approval <<W>>
System -> DB : Write catatan approval <<W>>
System -> DB : Write histori workflow <<W>>

== Tanda Tangan Digital ==
Pejabat -> UI : Request tanda tangan <<E>>
UI -> System : Submit e-sign request <<E>>
System -> API : Verify identitas <<R>>
API --> System : Identitas valid <<X>>
System -> API : Apply digital signature <<W>>
API --> System : Signature result <<X>>
System -> DB : Write surat signed <<W>>
System -> DB : Write log e-sign <<W>>

== Template Surat Management ==
Admin -> UI : Input template surat <<E>>
UI -> System : Submit template <<E>>
System -> DB : Write template <<W>>
System -> DB : Write versi template <<W>>
System --> UI : Daftar template <<X>>

Admin -> UI : Hapus template <<E>>
UI -> System : Submit delete <<E>>
System -> DB : Write update template <<W>>

== Arsip Digital Otomatis ==
System -> DB : Write klasifikasi arsip <<W>>
System -> DB : Write kategori arsip <<W>>
System -> DB : Write arsip digital <<W>>
System -> DB : Write indeks arsip <<W>>
System -> DB : Write metadata arsip <<W>>
System -> DB : Write status arsip <<W>>
System --> UI : Status pengarsipan <<X>>
System -> DB : Write log arsip <<W>>

== Pencarian Arsip Cerdas ==
User -> UI : Input kata kunci <<E>>
UI -> System : Submit pencarian <<E>>
System -> DB : Read arsip <<R>>
System --> UI : Hasil pencarian <<X>>
User -> UI : Buka arsip <<E>>

== Buku Agenda Elektronik ==
User -> UI : Request agenda <<E>>
UI -> System : Load agenda <<E>>
System -> DB : Read agenda <<R>>
System --> UI : Agenda tampil <<X>>
System -> DB : Write update agenda <<W>>
System -> DB : Write histori agenda <<W>>
System --> UI : Agenda terbaru <<X>>

== Notifikasi Real-Time ==
System -> Notification : Trigger surat baru <<W>>
Notification --> User : Notifikasi surat <<X>>
System -> Notification : Trigger disposisi <<W>>
Notification --> Pejabat : Notifikasi disposisi <<X>>
System -> Notification : Trigger approval <<W>>
Notification --> User : Notifikasi approval <<X>>

== Dashboard Monitoring Surat ==
Admin -> UI : Request dashboard <<E>>
UI -> System : Load monitoring <<E>>
System -> DB : Read statistik surat <<R>>
System --> UI : Grafik monitoring <<X>>

== Laporan Persuratan Berkala ==
Admin -> UI : Input periode laporan <<E>>
UI -> System : Request laporan <<E>>
System -> DB : Read data laporan <<R>>
System -> DB : Write arsip laporan <<W>>
System --> UI : Laporan tampil <<X>>

== Sinkronisasi Data SIMPEG ==
System -> API : Request data SIMPEG <<E>>
API --> System : Data pegawai <<X>>
System -> DB : Write data pegawai <<W>>
System -> DB : Write log sinkronisasi <<W>>
System --> UI : Status sinkronisasi <<X>>

== Audit Trail System ==
System -> DB : Write aktivitas user <<W>>
System -> DB : Write perubahan data <<W>>
System -> DB : Write akses sistem <<W>>
System -> DB : Write audit trail <<W>>
Admin -> UI : Request audit trail <<E>>
UI -> System : Load audit trail <<E>>
System -> DB : Read audit trail <<R>>
System --> UI : Audit trail tampil <<X>>

== Mobile Application Support ==
User -> UI : Request mobile access <<E>>
UI -> System : Request mobile data <<E>>
System -> API : Serve mobile service <<W>>
API --> System : Mobile response <<X>>
System -> DB : Read mobile data <<R>>
System --> UI : Mobile data tampil <<X>>
System -> DB : Write log mobile <<W>>
System -> DB : Write aktivitas mobile <<W>>

@enduml